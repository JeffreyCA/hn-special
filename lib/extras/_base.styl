// Animations
@keyframes flash
    0%
        left 0px

    25%
        left -12px

    50%
        left 0px

    75%
        left 12px

    100%
        left 0px

@keyframes slide-up
    from
        bottom -200px
        opacity 0

    60%
        bottom 90px
        opacity 1

    to
        bottom 30px
        opacity 1

@keyframes slide-out-right
    from
        right 20px
        opacity 1

    60%
        right 80px
        opacity 1

    to
        right -500px
        opacity 0

// Generic buttons (abstract styles)
$text-button
    font inherit
    border none
    font-weight 500
    background none
    cursor pointer
    margin 0
    padding 0
    color text-button-color

    &:hover
        text-decoration underline

$hnspecial-text-button
    color link-color

$hnspecial-button
    // border 1px solid lighten(text-color, 70%)
    font unquote(base-font)
    padding 5px 8px
    margin 0
    font-weight 500

    background base-color
    border none
    color light-link-color
    cursor pointer

    &:active
        color text-button-active-color
        background darken(base-color, 10%)

// HN Special infinite scroll
.hnspecial-infinite-pause
    padding-left 5px
    color text-button-color !important
    &:before
        content '|'
        margin-right 5px

.hnspecial-settings-button
    display inline-block

    width button-size
    height button-size
    margin-right 10px
    // Adjust position
    position relative
    top 3px

    img
        opacity .5
        transition opacity 100ms ease
        display block !important

    input[type="checkbox"]
        opacity 0

.hnspecial-settings-button-checkbox
    width button-size
    height button-size
    border none !important
    position absolute
    top 0
    left 0
    z-index 2
    cursor pointer
    padding 0px !important
    margin 0

    &:hover ~ img
        opacity 1

    &:active ~ img
        opacity 0.5 !important

    &:checked ~
        img
            opacity 1

        .hnspecial-settings-menu-container
            opacity 1
            top 24px
            height 2000px
            padding-top 10px

            transition-delay 0ms, 0ms, 0ms, 0ms, 300ms
            transition-timing-function ease-out

.hnspecial-settings-menu-container
    position absolute
    top 60px
    left -(menu-width/2 - button-size/2)
    width menu-width
    height 0px
    background transparent
    padding 0px
    overflow hidden
    box-sizing border-box
    font-weight 500
    text-align left
    opacity 0
    pointer-events none
    outline none

    transition-timing-function ease-out
    transition-property opacity, top, height, padding, outline
    transition-duration 150ms, 300ms, 0ms, 0ms, 0ms
    transition-delay 0ms, 0ms, 300ms, 300ms, 0ms

    &:before
        content ''
        position absolute
        left (menu-width/2 - button-size/2)
        top 3px
        transform rotate(45deg)
        z-index 0
        background menu-background
        display block
        width button-size
        height button-size

.hnspecial-settings-menu-inner
    width 100%
    padding 20px
    box-sizing border-box
    background menu-background
    pointer-events auto
    line-height 1.5
    color menu-color


    &.hnspecial-settings-menu-inner-transparent
        background transparent


    strong
        font-weight 400
        color darken(menu-color, 20%)
        margin-bottom 109px

    p
        font-size 14px
        color menu-color

        strong
            font-weight 500 !important

        a
            color link-color !important
            font-weight 400 !important
            letter-spacing 0px !important

    .hnspecial-settings-info
        margin-top 5px
        color menu-color

    .hnspecial-settings-tip
        @extend .hnspecial-settings-menu-inner p
        margin-bottom 20px
        overflow hidden

        button
            @extend $text-button
            @extend $hnspecial-text-button
            display block
            float right
            font-weight 400

    .hnspecial-settings-block
        margin-bottom 7px
        -webkit-user-select none
        -moz-user-select none

        &.hnspecial-settings-flash
            position relative
            animation flash 200ms ease
            animation-delay 2s
            animation-iteration-count 4

            label
                color lighten(menu-color, 50%)

        &:after
            content ''
            display block
            clear both

        label
            display block
            float left
            width 88%
            font-weight 500
            color menu-color
            cursor pointer

        .hnspecial-settings-checkbox-container
            display block
            float right
            width 12%
            //text-align right
            position relative

            input
                display block
                position absolute
                z-index 2
                top 0
                left 0
                width 100%
                border none
                height 100%
                cursor pointer

                &:not(checked) ~
                    .on
                        display none

                    .off
                        display block

                &:checked ~
                    .on
                        display block

                    .off
                        display none

        .hnspecial-settings-checkbox-indicator
            text-transform uppercase
            //font-weight 400

            &.on
                color settings-on-color

            &.off
                color settings-off-color

    .hnspecial-settings-submit-button, .hnspecial-settings-cancel-button
        cursor pointer
        width 125px
        margin-top 20px !important

    .hnspecial-settings-cancel-button
        margin-left 10px !important

// Mark as read
.hnspecial-mark-as-read-button
    border 0
    background-color transparent
    cursor pointer
    margin 0
    margin-right 4px
    padding 0 3px 0 0
    transition color 150ms ease

    &:hover
        color #666

    &, &:active
        color #b3b3b3


.hnspecial-mark-all-as-read-container
    transition all 150ms ease
    transition-delay 700ms

    box-sizing border-box
    overflow hidden
    height 0px
    color black
    padding-left 10px

    button
        margin-left 5px

table:hover + .hnspecial-mark-all-as-read-container, .hnspecial-mark-all-as-read-container:hover
    height 40px
    padding-top 10px

// Special message container
.hnspecial-message-container
    background page-background-color
    color light-link-color
    text-align center
    font-weight 500
    padding-top 20px

// Infinite scrolling separator
.hnspecial-infinite-scroll-separator td
    span
        display block
        margin-top 10px

    &:after
        margin-top 5px
        height 17px
        content ''
        width 100%
        display block
        border-top 1px solid comment-spacer-color

// Infinite scrolling notice
.hnspecial-infinite-search-notice
    position fixed
    right 20px
    bottom 30px
    width 400px
    color text-color
    background menu-background
    padding 20px
    font-weight 500
    cursor pointer
    animation slide-up 800ms ease

    span
        color lighten(text-color, 40%)
        font-size 14px

    &.hnspecial-infinite-search-notice-hidden
        animation slide-out-right 450ms ease
        animation-fill-mode both

// Fold comments
.hnspecial-fold-comment-button
    @extend $text-button

.hnspecial-folded-comment
    > *:not(:first-child)
        display none

.hnspecial-folded-row
    display none

// Optional permissions iframe
.hnspecial-permissions-iframe
    border 0 none
    height 113px
    padding-top 10px
    width 100%

    &.hnspecial-permissions-iframe-small
        height 50px

// User tooltips
.hn-special-tooltip-container
    position absolute
    z-index 1000
    padding-top 15px
    margin-left -10px

    &.hn-special-tooltip-loaded
        width 360px

    &:before
        width 0
        height 0
        border-left 10px solid transparent
        border-right 10px solid transparent
        border-bottom 10px solid tooltip-background-color
        position absolute
        top 5px
        left 20px
        content " "

    &.hn-special-tooltip-inverted
        padding-top 0
        padding-bottom 10px

        &:before
            border-bottom none !important
            border-top 10px solid tooltip-background-color !important
            top auto
            bottom 0px


.hn-special-tooltip
    color tooltip-text-color
    background-color tooltip-background-color
    padding 15px 20px
    font-weight 500

.hn-special-tooltip-key, .hn-special-tooltip-value
    float left
    word-wrap break-word

.hn-special-tooltip-key
    font-weight 400
    width 30%

.hn-special-tooltip-value
    width 70%
    font-weight 500

.hn-special-tooltip-clear
    margin-bottom 10px
    clear both

    &:last-child
        margin-bottom 0
